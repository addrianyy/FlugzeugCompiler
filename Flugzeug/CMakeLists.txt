cmake_minimum_required(VERSION 3.8)
project(Flugzeug)

set(CMAKE_CXX_STANDARD 20)

add_library(Flugzeug src/Flugzeug/IR/Value.cpp src/Flugzeug/IR/Value.hpp src/Flugzeug/IR/User.cpp src/Flugzeug/IR/User.hpp src/Flugzeug/IR/Instruction.cpp src/Flugzeug/IR/Instruction.hpp src/Flugzeug/IR/Type.cpp src/Flugzeug/IR/Type.hpp src/Flugzeug/Core/ClassTraits.cpp src/Flugzeug/Core/ClassTraits.hpp src/Flugzeug/Core/Error.cpp src/Flugzeug/Core/Error.hpp src/Flugzeug/Core/Log.cpp src/Flugzeug/Core/Log.hpp src/Flugzeug/Core/Platform.cpp src/Flugzeug/Core/Platform.hpp src/Flugzeug/Core/Casting.cpp src/Flugzeug/Core/Casting.hpp src/Flugzeug/IR/Function.cpp src/Flugzeug/IR/Function.hpp src/Flugzeug/IR/Block.cpp src/Flugzeug/IR/Block.hpp src/Flugzeug/Core/IntrusiveLinkedList.cpp src/Flugzeug/Core/IntrusiveLinkedList.hpp src/Flugzeug/IR/Instructions.cpp src/Flugzeug/IR/Instructions.hpp src/Flugzeug/IR/IRPrinter.cpp src/Flugzeug/IR/IRPrinter.hpp src/Flugzeug/IR/Internal/PrintInstruction.cpp src/Flugzeug/IR/Context.cpp src/Flugzeug/IR/Context.hpp src/Flugzeug/IR/InstructionInserter.cpp src/Flugzeug/IR/InstructionInserter.hpp src/Flugzeug/IR/ConsolePrinter.cpp src/Flugzeug/IR/ConsolePrinter.hpp src/Flugzeug/Core/ConsoleColors.cpp src/Flugzeug/Core/ConsoleColors.hpp src/Flugzeug/Passes/MemoryToSSA.cpp src/Flugzeug/Passes/MemoryToSSA.hpp src/Flugzeug/Passes/DeadCodeElimination.cpp src/Flugzeug/Passes/DeadCodeElimination.hpp src/Flugzeug/Core/Iterator.cpp src/Flugzeug/Core/Iterator.hpp src/Flugzeug/Passes/PhiToMemory.cpp src/Flugzeug/Passes/PhiToMemory.hpp src/Flugzeug/Passes/ConstPropagation.cpp src/Flugzeug/Passes/ConstPropagation.hpp src/Flugzeug/Core/DynamicVisitor.cpp src/Flugzeug/Core/DynamicVisitor.hpp src/Flugzeug/IR/InstructionVisitor.cpp src/Flugzeug/IR/InstructionVisitor.hpp src/Flugzeug/Passes/DeadBlockElimination.cpp src/Flugzeug/Passes/DeadBlockElimination.hpp src/Flugzeug/Passes/Utils/SimplifyPhi.cpp src/Flugzeug/Passes/Utils/SimplifyPhi.hpp src/Flugzeug/Passes/CFGSimplification.cpp src/Flugzeug/Passes/CFGSimplification.hpp src/Flugzeug/IR/Internal/Use.cpp src/Flugzeug/IR/Internal/Use.hpp src/Flugzeug/Core/StringifyEnum.cpp src/Flugzeug/Core/StringifyEnum.hpp src/Flugzeug/IR/DominatorTree.cpp src/Flugzeug/IR/DominatorTree.hpp src/Flugzeug/IR/Validator.cpp src/Flugzeug/IR/Validator.hpp src/Flugzeug/Passes/Utils/OptimizationResult.cpp src/Flugzeug/Passes/Utils/OptimizationResult.hpp src/Flugzeug/Passes/InstructionSimplification.cpp src/Flugzeug/Passes/InstructionSimplification.hpp src/Flugzeug/Passes/Utils/Evaluation.cpp src/Flugzeug/Passes/Utils/Evaluation.hpp src/Flugzeug/Passes/LocalReordering.cpp src/Flugzeug/Passes/LocalReordering.hpp src/Flugzeug/Core/HashCombine.cpp src/Flugzeug/Core/HashCombine.hpp src/Flugzeug/IR/Internal/TypeFilteringIterator.cpp src/Flugzeug/IR/Internal/TypeFilteringIterator.hpp src/Flugzeug/Passes/Utils/Inline.hpp src/Flugzeug/Passes/Utils/Inline.cpp src/Flugzeug/IR/Module.cpp src/Flugzeug/IR/Module.hpp src/Flugzeug/IR/Internal/DebugPrinter.cpp src/Flugzeug/IR/Internal/DebugPrinter.hpp src/Flugzeug/Core/DebugPrint.cpp src/Flugzeug/Core/DebugPrint.hpp src/Flugzeug/IR/Internal/GraphDumper.cpp src/Flugzeug/IR/Internal/GraphDumper.hpp src/Flugzeug/Core/Environment.cpp src/Flugzeug/Core/Environment.hpp src/Flugzeug/Core/Process.cpp src/Flugzeug/Core/Process.hpp src/Flugzeug/Passes/Analysis/Loops.cpp src/Flugzeug/Passes/Analysis/Loops.hpp src/Flugzeug/Passes/Analysis/SCC.cpp src/Flugzeug/Passes/Analysis/SCC.hpp src/Flugzeug/Passes/LoopUnrolling.cpp src/Flugzeug/Passes/LoopUnrolling.hpp src/Flugzeug/Passes/LoopInvariantOptimization.cpp src/Flugzeug/Passes/LoopInvariantOptimization.hpp src/Flugzeug/Passes/CallInlining.cpp src/Flugzeug/Passes/CallInlining.hpp src/Flugzeug/Passes/ConditionalFlattening.cpp src/Flugzeug/Passes/ConditionalFlattening.hpp src/Flugzeug/Passes/BlockInvariantPropagation.cpp src/Flugzeug/Passes/BlockInvariantPropagation.hpp src/Flugzeug/Passes/PhiMinimization.cpp src/Flugzeug/Passes/PhiMinimization.hpp src/Flugzeug/Passes/KnownBitsOptimization.cpp src/Flugzeug/Passes/KnownBitsOptimization.hpp src/Flugzeug/Passes/InstructionDeduplication.cpp src/Flugzeug/Passes/InstructionDeduplication.hpp src/Flugzeug/IR/Patterns.cpp src/Flugzeug/IR/Patterns.hpp src/Flugzeug/IR/Patterns/BinaryInstr.cpp src/Flugzeug/IR/Patterns/BinaryInstr.hpp src/Flugzeug/IR/Patterns/General.cpp src/Flugzeug/IR/Patterns/General.hpp src/Flugzeug/IR/Patterns/UnaryInstr.cpp src/Flugzeug/IR/Patterns/UnaryInstr.hpp src/Flugzeug/IR/Patterns/IntCompare.cpp src/Flugzeug/IR/Patterns/IntCompare.hpp src/Flugzeug/IR/Patterns/Cast.cpp src/Flugzeug/IR/Patterns/Cast.hpp src/Flugzeug/IR/Patterns/OtherInstructions.cpp src/Flugzeug/IR/Patterns/OtherInstructions.hpp src/Flugzeug/Passes/Analysis/PointerAliasing.cpp src/Flugzeug/Passes/Analysis/PointerAliasing.hpp src/Flugzeug/IR/Internal/PrintInstruction.hpp src/Flugzeug/Passes/Utils/OptimizationLocality.cpp src/Flugzeug/Passes/Utils/OptimizationLocality.hpp src/Flugzeug/IR/FilePrinter.cpp src/Flugzeug/IR/FilePrinter.hpp src/Flugzeug/Passes/Memory/DeadStoreElimination.cpp src/Flugzeug/Passes/Memory/DeadStoreElimination.hpp src/Flugzeug/Passes/Memory/KnownLoadElimination.cpp src/Flugzeug/Passes/Memory/KnownLoadElimination.hpp src/Flugzeug/Passes/MemoryOptimization.cpp src/Flugzeug/Passes/MemoryOptimization.hpp src/Flugzeug/Passes/Analysis/Paths.cpp src/Flugzeug/Passes/Analysis/Paths.hpp src/Flugzeug/IR/Parser/Lexer.cpp src/Flugzeug/IR/Parser/Lexer.hpp src/Flugzeug/IR/Parser/Token.cpp src/Flugzeug/IR/Parser/Token.hpp src/Flugzeug/IR/Parser/Parser.cpp src/Flugzeug/IR/Parser/Parser.hpp src/Flugzeug/Core/Files.cpp src/Flugzeug/Core/Files.hpp src/Flugzeug/IR/Parser/AST.cpp src/Flugzeug/IR/Parser/AST.hpp src/Flugzeug/IR/Parser/ModuleParser.cpp src/Flugzeug/IR/Parser/ModuleParser.hpp src/Flugzeug/IR/Parser/ModuleFromASTGenerator.cpp src/Flugzeug/IR/Parser/ModuleFromASTGenerator.hpp src/Flugzeug/Passes/GlobalReordering.cpp src/Flugzeug/Passes/GlobalReordering.hpp src/Flugzeug/Passes/LoopRotation.cpp src/Flugzeug/Passes/LoopRotation.hpp src/Flugzeug/Passes/Utils/LoopTransforms.cpp src/Flugzeug/Passes/Utils/LoopTransforms.hpp src/Flugzeug/Passes/LoopMemoryExtraction.cpp src/Flugzeug/Passes/LoopMemoryExtraction.hpp src/Flugzeug/Passes/PassRunner.cpp src/Flugzeug/Passes/PassRunner.hpp)

add_subdirectory("deps/fmt" EXCLUDE_FROM_ALL)
target_link_libraries(Flugzeug fmt::fmt)

target_include_directories(Flugzeug PUBLIC src)