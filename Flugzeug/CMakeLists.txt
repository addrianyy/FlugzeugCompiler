cmake_minimum_required(VERSION 3.8)
project(Flugzeug)

set(CMAKE_CXX_STANDARD 20)

add_library(Flugzeug src/Flugzeug/IR/Value.cpp src/Flugzeug/IR/Value.hpp src/Flugzeug/IR/User.cpp src/Flugzeug/IR/User.hpp src/Flugzeug/IR/Instruction.cpp src/Flugzeug/IR/Instruction.hpp src/Flugzeug/IR/Type.cpp src/Flugzeug/IR/Type.hpp src/Flugzeug/Core/ClassTraits.cpp src/Flugzeug/Core/ClassTraits.hpp src/Flugzeug/Core/Error.cpp src/Flugzeug/Core/Error.hpp src/Flugzeug/Core/Log.cpp src/Flugzeug/Core/Log.hpp src/Flugzeug/Core/Platform.cpp src/Flugzeug/Core/Platform.hpp src/Flugzeug/Core/Casting.cpp src/Flugzeug/Core/Casting.hpp src/Flugzeug/IR/Function.cpp src/Flugzeug/IR/Function.hpp src/Flugzeug/IR/Block.cpp src/Flugzeug/IR/Block.hpp src/Flugzeug/Core/IntrusiveLinkedList.cpp src/Flugzeug/Core/IntrusiveLinkedList.hpp src/Flugzeug/IR/Instructions.cpp src/Flugzeug/IR/Instructions.hpp src/Flugzeug/IR/IRPrinter.cpp src/Flugzeug/IR/IRPrinter.hpp src/Flugzeug/IR/PrintInstruction.cpp src/Flugzeug/IR/Context.cpp src/Flugzeug/IR/Context.hpp src/Flugzeug/IR/InstructionInserter.cpp src/Flugzeug/IR/InstructionInserter.hpp src/Flugzeug/IR/ConsolePrinter.cpp src/Flugzeug/IR/ConsolePrinter.hpp src/Flugzeug/Core/ConsoleColors.cpp src/Flugzeug/Core/ConsoleColors.hpp src/Flugzeug/Passes/MemoryToSSA.cpp src/Flugzeug/Passes/MemoryToSSA.hpp src/Flugzeug/Passes/DeadCodeElimination.cpp src/Flugzeug/Passes/DeadCodeElimination.hpp src/Flugzeug/Core/Iterator.cpp src/Flugzeug/Core/Iterator.hpp src/Flugzeug/Passes/PhiToMemory.cpp src/Flugzeug/Passes/PhiToMemory.hpp src/Flugzeug/Passes/ConstPropagation.cpp src/Flugzeug/Passes/ConstPropagation.hpp src/Flugzeug/Core/DynamicVisitor.cpp src/Flugzeug/Core/DynamicVisitor.hpp src/Flugzeug/IR/InstructionVisitor.cpp src/Flugzeug/IR/InstructionVisitor.hpp src/Flugzeug/Passes/DeadBlockElimination.cpp src/Flugzeug/Passes/DeadBlockElimination.hpp src/Flugzeug/Passes/Utils/SimplifyPhi.cpp src/Flugzeug/Passes/Utils/SimplifyPhi.hpp src/Flugzeug/Passes/CFGSimplification.cpp src/Flugzeug/Passes/CFGSimplification.hpp src/Flugzeug/Passes/CmpSimplification.cpp src/Flugzeug/Passes/CmpSimplification.hpp src/Flugzeug/IR/Use.cpp src/Flugzeug/IR/Use.hpp src/Flugzeug/Core/StringifyEnum.cpp src/Flugzeug/Core/StringifyEnum.hpp)

add_subdirectory("deps/fmt")
target_link_libraries(Flugzeug fmt::fmt)

target_include_directories(Flugzeug PUBLIC src)